\textbf{üìã Apa yang akan dipelajari}

Pada bab ini kita akan mempelajari tentang bekerja dengan file, stream, dan XML dalam Qt:

\begin{itemize}
\item Bekerja dengan direktori dan path menggunakan QDir
\item Membaca dan menulis file dengan QFile
\item Text stream dan data stream
\item XML dan cara memanipulasinya
\item DOM dan QXMLStreamReader
\end{itemize}

\minitoc

\section{üìÅ Bekerja dengan Direktori dan Path}

\subsection{Apa itu QDir?}

QDir adalah class Qt untuk bekerja dengan direktori dan path. Class ini menyediakan berbagai method untuk:

\begin{itemize}
\item \textbf{Navigasi direktori} - Pindah antar folder
\item \textbf{Informasi file} - Mendapatkan informasi file dan folder
\item \textbf{Filtering} - Menampilkan file/folder tertentu
\item \textbf{Path manipulation} - Mengelola path dengan mudah
\end{itemize}

\subsection{Static Methods QDir}

QDir menyediakan beberapa static method yang berguna:

\begin{itemize}
\item \textbf{QDir::current()} - Mendapatkan direktori kerja saat ini
\item \textbf{QDir::home()} - Mendapatkan direktori home user
\item \textbf{QDir::root()} - Mendapatkan root direktori
\item \textbf{QDir::drives()} - Mendapatkan daftar semua drive
\end{itemize}

\subsection{QFileInfo - Informasi File}

QFileInfo menyimpan informasi detail tentang file dan direktori:

\begin{itemize}
\item \textbf{isDir()} - Cek apakah berupa direktori
\item \textbf{isFile()} - Cek apakah berupa file
\item \textbf{isSymLink()} - Cek apakah berupa symbolic link
\item \textbf{exists()} - Cek apakah file/direktori ada
\item \textbf{isHidden()} - Cek apakah file tersembunyi
\item \textbf{isReadable()} - Cek apakah file bisa dibaca
\item \textbf{isWritable()} - Cek apakah file bisa ditulis
\item \textbf{fileName()} - Mendapatkan nama file tanpa path
\item \textbf{filePath()} - Mendapatkan nama file dengan path relatif
\item \textbf{absoluteFilePath()} - Mendapatkan path absolut
\item \textbf{completeBaseName()} - Mendapatkan nama file tanpa ekstensi
\item \textbf{completeSuffix()} - Mendapatkan ekstensi file
\end{itemize}

\subsection{Contoh: Menampilkan Daftar Drive}

\begin{enumerate}
\item Buka Qt Creator dan buat project Qt Console Application baru
\item Tulis kode berikut:

\lstinputlisting[language=c++, caption=Menampilkan daftar drives dari root directories, label=contoh12-1]{../code/contoh12-1.cpp}

\item Jalankan program dan perhatikan output:

\begin{lcverbatim}
Drive :  "C:/"
  "MATLAB"
  "PerfLogs"
  "Program Files"
  "Program Files (x86)"
  "Qt"
  "system.sav"
  "Users"
  "Windows"
Drive :  "D:/"
  "Music"
  "My Web Sites"
  "Photo"
  "Portable"
  "Referensi"
  "Software"
  "video"
  "webs"
\end{lcverbatim}
\end{enumerate}

\textbf{Analisis Program:}
\begin{itemize}
\item \textbf{QDir::drives()} - Mendapatkan semua drive yang ada
\item \textbf{foreach} - Loop untuk mengakses setiap drive
\item \textbf{setFilter(QDir::Dirs)} - Hanya tampilkan direktori
\item \textbf{entryList()} - Mendapatkan daftar file/direktori
\end{itemize}

\subsection{Filter Options QDir}

\begin{center}
\begin{tabular}{|l|l|}
\hline
\textbf{Filter} & \textbf{Deskripsi} \\
\hline
QDir::Dirs & Hanya direktori \\
\hline
QDir::Files & Hanya file \\
\hline
QDir::Drives & Hanya drive \\
\hline
QDir::AllEntries & Semua (file, direktori, drive) \\
\hline
QDir::NoSymLinks & Tidak termasuk symbolic links \\
\hline
QDir::NoDotAndDotDot & Tidak termasuk . dan .. \\
\hline
QDir::Readable & File yang bisa dibaca \\
\hline
QDir::Writable & File yang bisa ditulis \\
\hline
QDir::Executable & File yang bisa dieksekusi \\
\hline
QDir::Hidden & File tersembunyi \\
\hline
QDir::System & File sistem \\
\hline
\end{tabular}
\end{center}

\section{üìÑ Bekerja dengan File}

\subsection{Apa itu QFile?}

QFile adalah class Qt untuk bekerja dengan file. Class ini menyediakan:

\begin{itemize}
\item \textbf{File operations} - Buka, tutup, baca, tulis file
\item \textbf{File information} - Ukuran, tanggal modifikasi, dll
\item \textbf{Error handling} - Penanganan error yang baik
\item \textbf{Cross-platform} - Sama di semua platform
\end{itemize}

\subsection{File Permissions}

QFile mendukung berbagai permission:

\begin{itemize}
\item \textbf{QIODevice::ReadOnly} - Hanya baca
\item \textbf{QIODevice::WriteOnly} - Hanya tulis
\item \textbf{QIODevice::ReadWrite} - Baca dan tulis
\item \textbf{QIODevice::Append} - Tambah di akhir file
\item \textbf{QIODevice::Truncate} - Hapus isi file
\item \textbf{QIODevice::Text} - Mode teks (untuk Windows)
\end{itemize}

\subsection{Contoh: Memeriksa File}

\begin{enumerate}
\item Buka Qt Creator dan buat project Qt Console Application baru
\item Tulis kode berikut:

\lstinputlisting[language=c++, caption=Memeriksa apakah file ada dan bisa diakses, label=contoh12-2]{../code/contoh12-2.cpp}

\item Jalankan program dan perhatikan output:

\begin{lcverbatim}
File :  "testfile.txt"  tidak ditemukan
\end{lcverbatim}

\item Buat file "testfile.txt" di folder build, lalu jalankan lagi:

\begin{lcverbatim}
File berhasil dibuka !
\end{lcverbatim}
\end{enumerate}

\textbf{Analisis Program:}
\begin{itemize}
\item \textbf{exists()} - Cek apakah file ada
\item \textbf{open()} - Buka file dengan permission tertentu
\item \textbf{Error handling} - Tangani error jika file tidak bisa dibuka
\end{itemize}

\section{üåä Stream - Membaca dan Menulis File}

\subsection{Apa itu Stream?}

Stream adalah cara untuk membaca dan menulis data secara berurutan. Qt menyediakan dua jenis stream:

\begin{itemize}
\item \textbf{QTextStream} - Untuk file teks
\item \textbf{QDataStream} - Untuk file biner
\end{itemize}

\subsection{Keunggulan Stream}

\begin{itemize}
\item \textbf{Operator overloading} - Gunakan << dan >> untuk I/O
\item \textbf{Type safety} - Mencegah kesalahan tipe data
\item \textbf{Error handling} - Penanganan error yang baik
\item \textbf{Cross-platform} - Sama di semua platform
\end{itemize}

\subsection{Text Stream - File Teks}

QTextStream digunakan untuk membaca dan menulis file teks.

\subsubsection{Membaca File Teks}

\begin{enumerate}
\item Buka Qt Creator dan buat project Qt Console Application baru
\item Tulis kode berikut:

\lstinputlisting[language=c++, caption=Menggunakan Stream untuk membaca file, label=contoh12-3]{../code/contoh12-3.cpp}

\item Buat file teks "sample.txt" dengan isi "Buku Pemrograman C++"
\item Jalankan program dan perhatikan output:

\begin{lcverbatim}
Buku Pemrograman C++
\end{lcverbatim}
\end{enumerate}

\textbf{Method QTextStream:}
\begin{itemize}
\item \textbf{readAll()} - Baca semua isi file
\item \textbf{readLine()} - Baca satu baris
\item \textbf{atEnd()} - Cek apakah sudah di akhir file
\item \textbf{operator>>()} - Baca data dengan tipe tertentu
\item \textbf{operator<<()} - Tulis data ke stream
\end{itemize}

\subsection{Data Stream - File Biner}

QDataStream digunakan untuk membaca dan menulis file biner. File biner lebih efisien untuk data yang kompleks.

\subsubsection{Menggunakan Data Stream}

\begin{enumerate}
\item Buka Qt Creator dan buat project Qt Console Application baru
\item Tambahkan library GUI di file .pro:

\lstinputlisting[language=c++, caption=File pro untuk membuka library Qt GUI]{../code/12-file-stream-xml-file-pro-untuk-membuka-library-qt-gui.c++}

\item Tulis kode berikut:

\lstinputlisting[language=c++, caption=Menggunakan Data Stream, label=contoh12-4]{../code/12-file-stream-xml-contoh12-4.c++}

\item Jalankan program dan perhatikan output:

\begin{lcverbatim}
content
\end{lcverbatim}
\end{enumerate}

\textbf{Analisis Program:}
\begin{itemize}
\item \textbf{Struct Warna} - User-defined type untuk menyimpan data
\item \textbf{Operator <<} - Untuk menulis data ke stream
\item \textbf{Operator >>} - Untuk membaca data dari stream
\item \textbf{QDataStream} - Untuk file biner
\end{itemize}

\section{üìã XML - Extensible Markup Language}

\subsection{Apa itu XML?}

XML (Extensible Markup Language) adalah bahasa markup untuk menyimpan data terstruktur. XML memiliki:

\begin{itemize}
\item \textbf{Tag} - Elemen yang membungkus data
\item \textbf{Attribute} - Properti dari elemen
\item \textbf{Text} - Data yang disimpan
\item \textbf{Hierarchical} - Struktur parent-child
\end{itemize}

\subsection{Struktur XML}

\begin{lstlisting}[language=xml]{../code/12-file-stream-xml-code-3.xml}
\end{lstlisting}

\textbf{Analisis XML:}
\begin{itemize}
\item \textbf{<document>} - Root element
\item \textbf{name="example"} - Attribute
\item \textbf{<author>} - Child element
\item \textbf{Text content} - Data dalam elemen
\end{itemize}

\subsection{Qt XML Support}

Qt mendukung tiga cara untuk bekerja dengan XML:

\begin{itemize}
\item \textbf{DOM} - Document Object Model (tree-based)
\item \textbf{SAX} - Simple API for XML (event-based)
\item \textbf{QXMLStreamReader/Writer} - Stream-based (modern)
\end{itemize}

\subsection{Menambahkan Library XML}

Untuk menggunakan XML di Qt, tambahkan di file .pro:

\lstinputlisting[language=c++]{../code/12-file-stream-xml-code-4.c++}

\section{üå≥ DOM - Document Object Model}

\subsection{Apa itu DOM?}

DOM adalah cara untuk merepresentasikan dokumen XML sebagai tree di memory. Setiap elemen XML menjadi node dalam tree.

\subsection{Keunggulan DOM}

\begin{itemize}
\item \textbf{Tree structure} - Mudah navigasi
\item \textbf{Random access} - Akses elemen secara langsung
\item \textbf{Modification} - Mudah modifikasi dokumen
\item \textbf{Complete document} - Seluruh dokumen di memory
\end{itemize}

\subsection{Kekurangan DOM}

\begin{itemize}
\item \textbf{Memory usage} - Butuh memory besar untuk file besar
\item \textbf{Performance} - Lambat untuk file besar
\item \textbf{Complexity} - Lebih kompleks untuk operasi sederhana
\end{itemize}

\subsection{Membuat File XML dengan DOM}

\begin{enumerate}
\item Buka Qt Creator dan buat project Qt Console Application baru
\item Tulis kode berikut:

\lstinputlisting[language=c++, caption=Membuat Nodes untuk membuat simple XML Document, label=contoh12-5]{../code/12-file-stream-xml-contoh12-5.c++}

\item Jalankan program dan perhatikan output:

\begin{lcverbatim}
content
\end{lcverbatim}
\end{enumerate}

Hasil file XML "simple.xml":

\begin{lstlisting}[language=xml]{../code/12-file-stream-xml-code-6.xml}
\end{lstlisting}

\textbf{Analisis Program:}
\begin{itemize}
\item \textbf{QDomDocument} - Container untuk dokumen XML
\item \textbf{QDomElement} - Membuat elemen XML
\item \textbf{QDomText} - Menambah teks ke elemen
\item \textbf{appendChild()} - Menghubungkan elemen
\item \textbf{QTextStream} - Menulis ke file
\end{itemize}

\subsection{Membaca File XML dengan DOM}

\begin{enumerate}
\item Buka Qt Creator dan buat project Qt Console Application baru
\item Copy file "simple.xml" ke folder build
\item Tulis kode berikut:

\lstinputlisting[language=c++, caption=Contoh Membaca DOM dari dokumen XML, label=contoh12-6]{../code/12-file-stream-xml-contoh12-6.c++}

\item Jalankan program dan perhatikan output:

\begin{lcverbatim}
content
\end{lcverbatim}
\end{enumerate}

\textbf{Analisis Program:}
\begin{itemize}
\item \textbf{setContent()} - Load XML ke QDomDocument
\item \textbf{documentElement()} - Ambil root element
\item \textbf{firstChild()} - Ambil child pertama
\item \textbf{nextSibling()} - Pindah ke sibling berikutnya
\item \textbf{tagName()} - Ambil nama tag
\item \textbf{attribute()} - Ambil nilai attribute
\end{itemize}

\subsection{Memodifikasi File XML dengan DOM}

\begin{enumerate}
\item Buka Qt Creator dan buat project Qt Console Application baru
\item Buat file "simple.xml" dengan isi:

\begin{lstlisting}[language=xml]{../code/12-file-stream-xml-code-8.xml}
\end{lstlisting}

\item Tulis kode berikut:

\lstinputlisting[language=c++, caption=Main program Modifikasi data dokumen XML, label=contoh12-7]{../code/12-file-stream-xml-contoh12-7.c++}

\item Jalankan program dan perhatikan output:

\begin{lcverbatim}
content
\end{lcverbatim}
\end{enumerate}

Hasil modifikasi file "simplemodif.xml":

\begin{lstlisting}[language=xml]{../code/12-file-stream-xml-code-10.xml}
\end{lstlisting}

\textbf{Analisis Program:}
\begin{itemize}
\item \textbf{elementsByTagName()} - Cari elemen berdasarkan tag
\item \textbf{createElement()} - Buat elemen baru
\item \textbf{createTextNode()} - Buat node teks
\item \textbf{appendChild()} - Tambah elemen ke parent
\end{itemize}

\section{‚ö° QXMLStreamReader - Stream-based XML}

\subsection{Apa itu QXMLStreamReader?}

QXMLStreamReader adalah parser XML yang bekerja secara incremental. Parser ini:

\begin{itemize}
\item \textbf{Fast} - Lebih cepat dari DOM
\item \textbf{Memory efficient} - Tidak load seluruh dokumen
\item \textbf{Stream-based} - Baca token per token
\item \textbf{Simple} - API yang sederhana
\end{itemize}

\subsection{Token Types}

\begin{center}
\begin{tabular}{|l|l|l|}
\hline
\textbf{Token Type} & \textbf{Contoh} & \textbf{Getter Functions} \\
\hline
StartDocument & N/A & isStandaloneDocument() \\
\hline
EndDocument & N/A & isStandaloneDocument() \\
\hline
StartElement & <item> & namespaceUri(), name(), attributes() \\
\hline
EndElement & </item> & namespaceUri(), name() \\
\hline
Characters & AT\&T & text(), isWhitespace() \\
\hline
Comment & <!-- fix --> & text() \\
\hline
DTD & <!DOCTYPE ...> & text() \\
\hline
EntityReference & \&trade; & name(), text() \\
\hline
ProcessingInstruction & <?alert?> & processingInstructionTarget() \\
\hline
Invalid & >\&<! & error(), errorString() \\
\hline
\end{tabular}
\end{center}

\subsection{Contoh XML untuk Parsing}

\begin{lstlisting}[language=xml]{../code/12-file-stream-xml-code-11.xml}
\end{lstlisting}

Cara membaca token per token:

\lstinputlisting[language=c++]{../code/12-file-stream-xml-code-12.c++}

\subsection{Membaca XML dengan QXMLStreamReader}

\begin{enumerate}
\item Buka Qt Creator dan buat project Qt Console Application baru
\item Buat file "simple.xml":

\begin{lstlisting}[language=xml]{../code/12-file-stream-xml-code-13.xml}
\end{lstlisting}

\item Tulis kode berikut:

\lstinputlisting[language=c++, caption=Menggunakan QXMLStream Reader untuk membaca XML, label=contoh12-8]{../code/12-file-stream-xml-contoh12-8.c++}

\item Jalankan program dan perhatikan output:

\begin{lcverbatim}
content
\end{lcverbatim}
\end{enumerate}

\textbf{Analisis Program:}
\begin{itemize}
\item \textbf{atEnd()} - Cek apakah sudah di akhir dokumen
\item \textbf{readNext()} - Baca token berikutnya
\item \textbf{isStartElement()} - Cek apakah start element
\item \textbf{name()} - Ambil nama elemen
\item \textbf{text()} - Ambil teks dalam elemen
\end{itemize}

\subsection{Membuat XML dengan QXMLStreamWriter}

\begin{enumerate}
\item Buka Qt Creator dan buat project Qt Console Application baru
\item Tulis kode berikut:

\lstinputlisting[language=c++, caption=Membuat dokumen XML dengan QXMLStreamWriter, label=contoh12-9]{../code/12-file-stream-xml-contoh12-9.c++}

\item Jalankan program dan perhatikan output:

\begin{lcverbatim}
File sudah berhasil di buat !
\end{lcverbatim}
\end{enumerate}

Hasil file XML "simple.xml":

\begin{lstlisting}[language=xml]{../code/12-file-stream-xml-code-16.xml}
\end{lstlisting}

\textbf{Analisis Program:}
\begin{itemize}
\item \textbf{setAutoFormatting()} - Format XML otomatis
\item \textbf{writeStartDocument()} - Mulai dokumen XML
\item \textbf{writeStartElement()} - Tulis start element
\item \textbf{writeAttribute()} - Tulis attribute
\item \textbf{writeEndElement()} - Tulis end element
\item \textbf{writeEndDocument()} - Akhiri dokumen XML
\end{itemize}

\section{üîß Best Practices File dan XML}

\subsection{Tips Menggunakan File I/O}

\begin{enumerate}
\item \textbf{Gunakan QFile} - Jangan campur dengan std::fstream
\item \textbf{Error handling} - Selalu cek error setelah operasi file
\item \textbf{Resource management} - Tutup file setelah selesai
\item \textbf{Path handling} - Gunakan QDir untuk path yang aman
\item \textbf{Cross-platform} - Perhatikan perbedaan platform
\end{enumerate}

\subsection{Tips Menggunakan XML}

\begin{enumerate}
\item \textbf{Pilih parser yang tepat} - DOM untuk file kecil, Stream untuk file besar
\item \textbf{Memory management} - Perhatikan penggunaan memory
\item \textbf{Error handling} - Tangani error parsing
\item \textbf{Validation} - Validasi XML sebelum parsing
\item \textbf{Encoding} - Perhatikan encoding XML
\end{enumerate}

\subsection{Kesalahan Umum}

\begin{itemize}
\item \textbf{Lupa close file} - File tidak ditutup setelah selesai
\item \textbf{Wrong permission} - Permission tidak sesuai kebutuhan
\item \textbf{Path issues} - Path tidak valid atau tidak ada
\item \textbf{Memory leak} - DOM tidak dihapus untuk file besar
\item \textbf{Encoding issues} - Encoding XML tidak sesuai
\end{itemize}

\section{üìö Referensi dan Bacaan Lanjutan}

File I/O dan XML adalah topik yang luas dan terus berkembang. Untuk pemahaman yang lebih mendalam, pembaca dapat merujuk pada:

\begin{itemize}
\item \textbf{Qt Documentation} - Dokumentasi resmi Qt\footnote{Qt Company. (2023). "Qt Core Module". https://doc.qt.io/qt-6/qtcore-index.html}
\item \textbf{XML Tutorial} - Tutorial XML dari W3Schools\footnote{W3Schools. (2023). "XML Tutorial". https://www.w3schools.com/xml/}
\item \textbf{Qt File I/O} - Dokumentasi file I/O Qt\footnote{Qt Company. (2023). "QFile Class". https://doc.qt.io/qt-6/qfile.html}
\item \textbf{Qt XML} - Dokumentasi XML Qt\footnote{Qt Company. (2023). "Qt XML Module". https://doc.qt.io/qt-6/qtxml-index.html}
\end{itemize}

\section{üéâ Kesimpulan}

File I/O dan XML adalah komponen penting dalam pengembangan aplikasi. Dengan memahami QDir, QFile, stream, dan XML parsing, Anda dapat membuat aplikasi yang dapat bekerja dengan berbagai jenis data dan format.

\begin{center}
\textbf{Selamat! Anda telah menguasai dasar-dasar File I/O dan XML} üìÑ
\end{center}

\vspace{1cm}

\begin{center}
\textit{--- Bab selanjutnya: Qt WebKit ---}
\end{center}
